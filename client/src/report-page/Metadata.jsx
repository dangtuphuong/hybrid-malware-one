/* eslint-disable react/prop-types */
import { Typography, Paper, List, ListItem, Button } from "@mui/material";
import { useState } from "react";

const Metadata = ({ report }) => {
  const [showFeatures, setShowFeatures] = useState(false);
  return (
    <Paper
      variant="outlined"
      style={{
        padding: "16px",
        backgroundColor: "white",
      }}
    >
      <Typography fontWeight="600" variant="h6" gutterBottom>
        Training Details
      </Typography>
      <List sx={{ display: "flex", flexDirection: "column" }}>
        <ListItem sx={{ padding: 1, margin: 0 }}>
          <strong style={{ marginRight: "10px" }}>ID: </strong>
          {report["report_id"]}
        </ListItem>
        <ListItem sx={{ padding: 1, margin: 0 }}>
          <strong style={{ marginRight: "10px" }}>Name: </strong>
          {report["name"]}
        </ListItem>
        <ListItem sx={{ padding: 1, margin: 0 }}>
          <strong style={{ marginRight: "10px" }}>
            Number of Items in Dataset:{" "}
          </strong>
          {Object.values(report["malware_distribution"] || {}).reduce(
            (r, i) => (r += i),
            0
          )}
        </ListItem>
        <ListItem sx={{ padding: 1, margin: 0 }}>
          <strong style={{ marginRight: "10px" }}>Number of Malwares: </strong>
          {Object.keys(report["malware_distribution"] || {})?.length}
        </ListItem>
        <ListItem sx={{ padding: 1, margin: 0, display: "inline-block" }}>
          <strong>Trained Features: </strong>
          <Button
            onClick={() => setShowFeatures(!showFeatures)}
            sx={{ textTransform: "none" }}
          >
            {report["features"]?.split(",")?.length} features
          </Button>
          {showFeatures && (
            <div style={{ wordWrap: "break-word" }}>{report["features"]}</div>
          )}
        </ListItem>
        <ListItem sx={{ padding: 1, margin: 0 }}>
          <strong style={{ marginRight: "10px" }}>Created By: </strong>
          {report["created_by"]}
        </ListItem>
        <ListItem sx={{ padding: 1, margin: 0 }}>
          <strong style={{ marginRight: "10px" }}>Created At: </strong>
          {report["created_at"]}
        </ListItem>
      </List>
    </Paper>
  );
};

export default Metadata;
