/* eslint-disable react/prop-types */
import { PieChart, pieArcLabelClasses } from "@mui/x-charts/PieChart";
import { Typography } from "@mui/material";
import { Paper } from "@mui/material"; // Import Paper for background
import { colors } from "./constants";

const size = {
  margin: { right: 5 },
  height: 300, // Set the height to match the RecallChart
  legend: { hidden: true },
};

export default function MalwareDistChart({ data, loading }) {
  const TOTAL = data?.map((item) => item.value).reduce((a, b) => a + b, 0);

  const getArcLabel = (params) => {
    const percent = params.value / TOTAL;
    return `${(percent * 100).toFixed(0)}%`;
  };

  return (
    <Paper
      variant="outlined"
      style={{ padding: "16px", backgroundColor: "white" }}
    >
      <Typography fontWeight="600" variant="h6" gutterBottom>
        Malware Distribution
      </Typography>
      <PieChart
        loading={loading}
        colors={colors}
        series={[
          {
            data: data,
            arcLabel: getArcLabel,
            resolveSizeBeforeRender: true,
          },
        ]}
        sx={{
          [`& .${pieArcLabelClasses.root}`]: {
            fill: "white",
            fontSize: 14,
          },
        }}
        {...size} // Apply size properties
      />
    </Paper>
  );
}
